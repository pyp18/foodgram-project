<!doctype html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Мои подписки</title>
    <link rel="stylesheet" href="{% static 'pages/myFollow.css' %}">
</head>

<body class="body">
    <header class="header">
        {% include 'navbar.html' %}
    </header>
    <main class="main container">
        <div class="main__header">
            <h1 class="main__title">Мои подписки</h1>
        </div>
        <div class="card-list">
            {% for follow in user.follower.all %}
            <div class="card-user" data-author="700">
                <div class="card-user__header">
                    <h2 class="card-user__title">{{ follow.author }}</h2>
                </div>
                <div class="card-user__body">
                    <ul class="card-user__items">
                        <li class="card-user__item">
                            {% for recipe in follow.author.recipes.all %}
                            <div class="recipe">
                                <img src="{{ recipe.image.url }}" alt="какой-то-текст" class="recipe__image">
                                <h3 class="recipe__title">{{ recipe.title }}</h3>
                                <p class="recipe__text"><span class="icon-time"></span> {{ recipe.time_cooking }} мин.
                                </p>
                            </div>
                        </li>
                        {% endfor %}
                        <li class="card-user__item">
                            <a href="{% url 'profile' follow.author.username %}" class="card-user__link link">
                                {% if follow.author.recipes.all|length == 0 %}
                                У пользователя нет рецептов.
                                {% elif follow.author.recipes.all|length < 3 %} <p>
                                    </p>
                                    {% elif follow.author.recipes.all|length|add:'-3' == 1 %}
                                    Еще {{ follow.author.recipes.all|length|add:'-3' }} рецепт...
                                    {% elif follow.author.recipes.all|length|add:'-3' < 5 %} Еще {{
                                        follow.author.recipes.all|length|add:'-3' }} рецептa... {% else %} Еще {{
                                        follow.author.recipes.all|length|add:'-3' }} рецептов... {% endif %} </a>
                        </li>
                    </ul>
                </div>
                {% if user.is_authenticated %}
                {% if follow %}
                <a href="{% url 'unfollow' follow.author.username %}">
                    <button class="button button_style_light-blue button_size_auto" name="subscribe">
                        Отписаться
                    </button>
                </a>
                {% elif author == user %}
                <h3 class="single-card__section-title">Не стоит подписываться на себя</h3>
                {% else %}
                <a href="{% url 'follow' follow.author.username %}">
                    <button class="button button_style_light-blue button_size_subscribe" name="subscribe" data-out>
                        Подписаться на автора
                    </button>
                </a>
                {% endif %}
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <nav class="pagination" aria-label="Search results pages">
            <ul class="pagination__container">
                <li class="pagination__item"><a class="pagination__link link" href="#"><span
                            class="icon-left"></span></a></li>
                <li class="pagination__item pagination__item_active"><a class="pagination__link link" href="#">1</a>
                </li>
                <li class="pagination__item"><a class="pagination__link link" href="#">2</a></li>
                <li class="pagination__item"><a class="pagination__link link" href="#">3</a></li>
                <li class="pagination__item"><a class="pagination__link link" href="#">4</a></li>
                <li class="pagination__item"><a class="pagination__link link" href="#">5</a></li>
                <li class="pagination__item"><a class="pagination__link link" href="#"><span
                            class="icon-right"></span></a></li>
            </ul>
        </nav>
    </main>
    {% include 'ready/footer.html' %}
    <script src="{% static 'js/config/config.js' %}"></script>
    <script src="{% static 'js/components/MainCards.js' %}"></script>
    <script src="{% static 'js/components/MyFollow.js' %}"></script>
    <script src="{% static 'js/components/Subscribe.js' %}"></script>
    <script src="{% static 'js/components/Header.js' %}"></script>
    <script src="{% static 'js/api/Api.js' %}"></script>
    <script src="{% static 'myFollow.js' %}"></script>

</body>

</html>